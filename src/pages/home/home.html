
<ion-header >
    <ion-toolbar no-border>
      <ion-grid no-padding fixed>
        <ion-row>
          <ion-col col-2>
            <ion-buttons start>
              <button ion-button icon-only color="royal" menuToggle>
                <ion-icon name="menu"></ion-icon>
              </button>
            </ion-buttons>
          </ion-col>
          <ion-col col-8>
            <ion-searchbar [(ngModel)]="search"
                     [showCancelButton]="true"
                     (ionInput)="onChange()"
                     (ionCancel)="onCancel($event)"
                     animated="true"
                     debounce="1500"
                     color="white">
      </ion-searchbar>
          </ion-col>
          <ion-col col-2>
            <ion-buttons end>
              <div *ngIf="auth.authState | async as user; else showBtn" class="avatar">
                  <ion-avatar item-end>
                      <img src={{user.photoURL}} (click)="profile()">
                    </ion-avatar>
              </div>
            </ion-buttons>
          </ion-col>
        </ion-row>
        <ion-row>
          <ion-col col-12>
            <ion-slides slidesPerView="3" 
                        spaceBetween="10">
              <ion-slide *ngFor="let genre of genres">
                <div style="width: 100%; overflow: hidden;">
                  <button ion-button color="white" clear (click)="getByGenre(genre.name)">{{genre.name}}</button>                              
                </div>
              </ion-slide>
            </ion-slides>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-toolbar>
</ion-header>

<ion-content>
    <ion-card padding-bottom="20px">
        <ion-card-header>
          <ion-card-title>
            <p>Last added</p>    
          </ion-card-title>
        </ion-card-header>
        <ion-slides slidesPerView="4"
                    spaceBetween="5">
          <ion-slide *ngFor="let new of newestBooks">
             <div class="avatar-card">
               <ion-avatar>
                 <img src={{new.coverUrl}} alt={{new.title}} (click)="selectProduct(new)">
               </ion-avatar>
               <div style="height: 10vh; overflow: hidden;">
                <p>{{new.title}}</p>
                <p><b>{{new.price}} UZS</b></p>
              </div> 
                 <button ion-button icon-only clear (click)="cart.addToCart(new)">
                    <ion-icon name="cart" color="custom"></ion-icon>
                 </button>
              </div>
            </ion-slide>
          </ion-slides>
        </ion-card> 
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <p>Books in Uzbek</p>    
        </ion-card-title>
      </ion-card-header>
      <ion-slides slidesPerView="4"
                  spaceBetween="5">
        <ion-slide *ngFor="let uz of uzbBooks">
           <div class="avatar-card">
             <ion-avatar>
               <img src={{uz.coverUrl}} alt={{uz.title}} (click)="selectProduct(uz)">
             </ion-avatar>
             <div style="height: 10vh; overflow: hidden;">
                <p>{{uz.title}}</p>
                <p><b>{{uz.price}} UZS</b></p>
              </div> 
               <button ion-button icon-only clear (click)="cart.addToCart(uz)">
                  <ion-icon name="cart" color="custom"></ion-icon>
               </button>
            </div>
          </ion-slide>
        </ion-slides>
      </ion-card>    

    <ion-card>
        <ion-card-header>
          <ion-card-title>
            <p>Books in Russian</p>    
          </ion-card-title>
        </ion-card-header>
      <ion-slides slidesPerView="4"
                  spaceBetween="5">
        <ion-slide *ngFor="let rus of rusBooks">
           <div class="avatar-card">
             <ion-avatar>
               <img src={{rus.coverUrl}} alt={{rus.title}} (click)="selectProduct(rus)">
             </ion-avatar>
             <div style="height: 10vh; overflow: hidden;">
                <p>{{rus.title}}</p>
                <p><b>{{rus.price}} UZS</b></p>
              </div> 
             <button ion-button icon-only clear (click)="cart.addToCart(rus)">
                <ion-icon name="cart" color="custom"></ion-icon>
             </button>
          </div>
        </ion-slide>
      </ion-slides>
    </ion-card>

    <ion-card>
        <ion-card-header>
            <ion-card-title>
              <p>Books in English</p>    
            </ion-card-title>
          </ion-card-header>
      <ion-slides slidesPerView="4"
                  spaceBetween="5">
        <ion-slide *ngFor="let eng of engBooks">
           <div class="avatar-card">
             <ion-avatar>
               <img src={{eng.coverUrl}} alt={{eng.title}} (click)="selectProduct(eng)">
             </ion-avatar>
             <div style="height: 10vh; overflow: hidden;">
                <p>{{eng.title}}</p>
                <p><b>{{eng.price}} UZS</b></p>
              </div> 
             <button ion-button icon-only clear (click)="cart.addToCart(eng)">
                <ion-icon name="cart" color="custom"></ion-icon>
             </button>
          </div>
        </ion-slide>
      </ion-slides>
    </ion-card>

    <ion-card>
        <ion-card-header>
            <ion-card-title>
              <p>Foreign Books</p>    
            </ion-card-title>
          </ion-card-header>
      <ion-slides slidesPerView="4"
                  spaceBetween="5">
        <ion-slide *ngFor="let foreign of foreignBooks">
           <div class="avatar-card">
             <ion-avatar>
               <img src={{foreign.coverUrl}} alt={{foreign.title}} (click)="selectProduct(foreign)" >
             </ion-avatar>
             <div style="height: 10vh; overflow: hidden;">
                <p>{{foreign.title}}</p>
                <p><b>{{foreign.price}} UZS</b></p>
              </div> 
             <button ion-button icon-only clear (click)="cart.addToCart(foreign)">
                <ion-icon name="cart" color="custom"></ion-icon>
             </button>
          </div>
        </ion-slide>
      </ion-slides>
    </ion-card>
    
</ion-content>


<ng-template #showBtn>
    <button ion-button icon-only color="royal" (click)="goto('LoginPage')" clear style="height: 5vh;border-radius: 10px">
        <ion-icon name="log-in"></ion-icon>
      </button>
</ng-template>
